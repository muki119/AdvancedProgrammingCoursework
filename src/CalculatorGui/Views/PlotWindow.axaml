<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="CalculatorGui.Views.PlotWindow"
        Title="Polynomial Plot"
        Width="900" Height="700"
        MinWidth="600" MinHeight="500">

    <Window.Resources>
        <!-- inherit theme colors from main window -->
        <SolidColorBrush x:Key="DarkBackground">#191919</SolidColorBrush>
        <SolidColorBrush x:Key="DarkSurface">#2a272a</SolidColorBrush>
        <SolidColorBrush x:Key="DarkBorder">#4b4a54</SolidColorBrush>
        <SolidColorBrush x:Key="DarkText">#c9d1d9</SolidColorBrush>
        <SolidColorBrush x:Key="DarkTextSecondary">#8b949e</SolidColorBrush>
        <SolidColorBrush x:Key="DarkAccent">#a3cfcd</SolidColorBrush>
        <SolidColorBrush x:Key="DarkSuccess">#56d364</SolidColorBrush>
        <SolidColorBrush x:Key="DarkError">#EC1915</SolidColorBrush>
        <SolidColorBrush x:Key="DarkButtonPrimary">#238636</SolidColorBrush>
        <SolidColorBrush x:Key="DarkButtonPrimaryHover">#2ea043</SolidColorBrush>
        <SolidColorBrush x:Key="DarkButtonSecondary">#21262d</SolidColorBrush>
        <SolidColorBrush x:Key="DarkButtonSecondaryHover">#30363d</SolidColorBrush>
        
        <SolidColorBrush x:Key="LightBackground">#ffffff</SolidColorBrush>
        <SolidColorBrush x:Key="LightSurface">#dadde2</SolidColorBrush>
        <SolidColorBrush x:Key="LightBorder">#b1bdc5</SolidColorBrush>
        <SolidColorBrush x:Key="LightText">#628281</SolidColorBrush>
        <SolidColorBrush x:Key="LightTextSecondary">#43655a</SolidColorBrush>
        <SolidColorBrush x:Key="LightAccent">#324b4a</SolidColorBrush>
        <SolidColorBrush x:Key="LightSuccess">#238636</SolidColorBrush>
        <SolidColorBrush x:Key="LightError">#EC1915</SolidColorBrush>
        <SolidColorBrush x:Key="LightButtonPrimary">#238636</SolidColorBrush>
        <SolidColorBrush x:Key="LightButtonPrimaryHover">#2ea043</SolidColorBrush>
        <SolidColorBrush x:Key="LightButtonSecondary">#eaeef2</SolidColorBrush>
        <SolidColorBrush x:Key="LightButtonSecondaryHover">#d0d7de</SolidColorBrush>
    </Window.Resources>

    <Window.Styles>
        <Style Selector="Window">
            <Setter Property="Background" Value="{DynamicResource WindowBackground}"/>
        </Style>
        <Style Selector="TextBlock.label">
            <Setter Property="Foreground" Value="{DynamicResource TextSecondary}"/>
        </Style>
        <Style Selector="TextBlock.error">
            <Setter Property="Foreground" Value="{DynamicResource ErrorColor}"/>
        </Style>
        <Style Selector="TextBox">
            <Setter Property="Background" Value="{DynamicResource SurfaceBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource TextPrimary}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource BorderColor}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Padding" Value="8,6"/>
        </Style>
        <Style Selector="Button">
            <Setter Property="Background" Value="{DynamicResource ButtonPrimary}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        <Style Selector="Button:pointerover">
            <Setter Property="Background" Value="{DynamicResource ButtonPrimaryHover}"/>
        </Style>
        <Style Selector="Button.secondary">
            <Setter Property="Background" Value="{DynamicResource ButtonSecondary}"/>
            <Setter Property="Foreground" Value="{DynamicResource TextPrimary}"/>
        </Style>
        <Style Selector="Button.secondary:pointerover">
            <Setter Property="Background" Value="{DynamicResource ButtonSecondaryHover}"/>
        </Style>
        <Style Selector="Border.surface">
            <Setter Property="Background" Value="{DynamicResource SurfaceBackground}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource BorderColor}"/>
        </Style>
    </Window.Styles>

    <Grid Margin="20" RowDefinitions="Auto,*">
        <!-- control panel -->
        <Border Grid.Row="0" Classes="surface" BorderThickness="1" CornerRadius="8" Padding="16" Margin="0,0,0,15">
            <StackPanel Spacing="12">
                <TextBlock Text="Function Plotter" FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource AccentColor}"/>
                
                <Grid ColumnDefinitions="*,Auto">
                    <StackPanel Grid.Column="0" Spacing="8">
                        <TextBlock Text="Expression (use 'x' as variable)" Classes="label" FontSize="12"/>
                        <TextBox x:Name="coeffsBox" Watermark="e.g., x^2 + 3*x + 1  or  2*x - 5  or  x^3 - 4*x" FontSize="14"/>
                    </StackPanel>
                    
                    <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8" Margin="12,0,0,0">
                        <StackPanel Width="100">
                            <TextBlock Text="x min" Classes="label" FontSize="11"/>
                            <TextBox x:Name="xMinBox" Text="-10"/>
                        </StackPanel>
                        <StackPanel Width="100">
                            <TextBlock Text="x max" Classes="label" FontSize="11"/>
                            <TextBox x:Name="xMaxBox" Text="10"/>
                        </StackPanel>
                        <StackPanel Width="80">
                            <TextBlock Text="Î”x" Classes="label" FontSize="11"/>
                            <TextBox x:Name="dxBox" Text="0.1"/>
                        </StackPanel>
                    </StackPanel>
                </Grid>

                <StackPanel Orientation="Horizontal" Spacing="10">
                    <Button x:Name="plotButton" Content="Plot" Width="100"/>
                    <Button x:Name="clearButton" Content="Clear" Width="100" Classes="secondary"/>
                    <TextBlock x:Name="plotError" Classes="error" VerticalAlignment="Center" Margin="10,0,0,0"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- plot canvas with grid -->
        <Border Grid.Row="1" Classes="surface" BorderThickness="1" CornerRadius="8" Padding="8">
            <Canvas x:Name="plotCanvas" ClipToBounds="True"/>
        </Border>
    </Grid>
</Window>
